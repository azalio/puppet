#!/usr/bin/env bash
# Backup Script
#
# Example usage:
# docker run --rm -it -v $(pwd):/vpm --volumes-from puppet_r10k_1 vladgh/awscli:latest /vpm/bin/backup

# Load environment
# shellcheck disable=1090
. "$(cd "$(dirname "${BASH_SOURCE[0]}")/../" && pwd -P)/envrc"

# Backup Puppet SSL Directory
create_archive '/etc/puppetlabs/puppet/ssl'
upload_archive "$PP_BACKUP_S3"
clean_archive
