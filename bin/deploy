#!/usr/bin/env bash
# Deploy script

# Load environment
# shellcheck disable=1090
. "$(cd "$(dirname "${BASH_SOURCE[0]}")/../" && pwd -P)/envrc"

# Service(s)
DOCKER_SERVICE="$*"

# Set working directory
cd "$APPDIR" || exit

# Restart docker-compose services
if [[ -n "$DOCKER_SERVICE" ]]; then
  docker-compose pull "$DOCKER_SERVICE"
  docker-compose up -d "$DOCKER_SERVICE"
else
  docker-compose pull
  docker-compose up -d
fi
